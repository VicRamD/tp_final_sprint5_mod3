<body>
    <form id="formPais" action="#" method="post">
        <label for="nombreComunPais">Nombre Común:</label>
        <input type="text" name="nombreComunPais" id="nombreComunPais" placeholder="Argentina" 
        value="<%= typeof valoresRetornados !== 'undefined' && valoresRetornados.nombreComunPais ? valoresRetornados.nombreComunPais  : '' %>">
        <p class="errorMesage">
            <%= camposErroneos && camposErroneos.includes("nombreComunPais") ? mensajesDeError[camposErroneos.indexOf("nombreComunPais")] : '' %>
        </p>

        <label for="nombreOficialPais">Nombre Oficial:</label>
        <input type="text" name="nombreOficialPais" id="nombreOficialPais" placeholder="República Argentina"
        value="<%= typeof valoresRetornados !== 'undefined' && valoresRetornados.nombreOficialPais ? valoresRetornados.nombreOficialPais  : '' %>">
        <p class="errorMesage">
            <%= camposErroneos && camposErroneos.includes("nombreOficialPais") ? mensajesDeError[camposErroneos.indexOf("nombreOficialPais")] : '' %>
        </p>

        <label for="capitalPais">Capital</label>
        <input type="text" name="capitalPais" id="capitalPais" 
        value="<%= typeof valoresRetornados !== 'undefined' && valoresRetornados.capitalPais ? valoresRetornados.capitalPais  : '' %>">
        <p class="errorMesage">
            <%= camposErroneos && camposErroneos.includes("capitalPais") ? mensajesDeError[camposErroneos.indexOf("capitalPais")] : '' %>
        </p>

        <div id="paisesFronteraContainer" class="w-full">
            <label for="idPaisFrontera">Países Frontera: <span>(3 letras mayúsculas)</span></label>
            <!--<input type="text" name="paisFrontera" id="idPaisFrontera" placeholder="ARG" minlength="3" maxlength="3">-->
            <input type="text" name="paisFrontera" id="idPaisFrontera" placeholder="ARG">
            <button type="button" id="btnAgregarPaisFrontera">Agregar país</button>
            <p class="errorMesage">
                <%= camposErroneos && camposErroneos.includes("paisesFrontera") ? mensajesDeError[camposErroneos.indexOf("paisesFrontera")] : '' %>
            </p>
            <p class="errorMesage"> <!-- some verifica si hay un elemento con el substring -->
                <%= camposErroneos && camposErroneos.some(campo => campo.includes("paisesFrontera[")) ? mensajesDeError[camposErroneos.findIndex(campo => campo.includes("paisesFrontera["))] : '' %>
            </p>

            <% if (typeof valoresRetornados !== 'undefined' && valoresRetornados.paisesFrontera) { %>
                <% valoresRetornados.paisesFrontera.forEach(frontera => { %>
                    <div class="inputAndBtnContainer">
                        <input type="text" name="paisesFrontera[]" class="inputVector" 
                        required minlength="3" maxlength="3" value="<%= frontera %>"> 
                        <button type="button" class="btnQuitar">Quitar</button>
                    </div>   
                <% }); %>
            <% } %>
        </div>

        <label for="areaPais">Área</label>
        <input type="number" name="areaPais" id="areaPais"
        value="<%= typeof valoresRetornados !== 'undefined' && valoresRetornados.areaPais ? valoresRetornados.areaPais  : '' %>">
        <p class="errorMesage">
            <%= camposErroneos && camposErroneos.includes("areaPais") ? mensajesDeError[camposErroneos.indexOf("areaPais")] : '' %>
        </p>

        <label for="poblacionPais">Población</label>
        <input type="number" name="poblacionPais" id="poblacionPais"
        value="<%= typeof valoresRetornados !== 'undefined' && valoresRetornados.poblacionPais ? valoresRetornados.poblacionPais  : '' %>">
        <p class="errorMesage">
            <%= camposErroneos && camposErroneos.includes("poblacionPais") ? mensajesDeError[camposErroneos.indexOf("poblacionPais")] : '' %>
        </p>
        
        <div id="timezonesContainer" class="w-full">
            <label for="idTimezone">Timezones</label>
            <input type="text" name="timezone" id="idTimezone" placeholder="UTC-05:00" 
            pattern="^UTC-\d{2}:\d{2}$" title="El formato requerido: UTC-HH:MM (ej. UTC-05:00)">
            <button type="button" id="btnAgregarTimezone">Agregar Timezone</button>
            <% if (typeof valoresRetornados !== 'undefined' && valoresRetornados.timezones) { %>
                <% valoresRetornados.timezones.forEach(timezone => { %>
                    <div class="inputAndBtnContainer">
                        <input type="text" name="timezones[]" class="inputVector" 
                        required minlength="3" maxlength="60" value="<%= timezone %>" pattern="^UTC-\d{2}:\d{2}$" title="El formato requerido: UTC-HH:MM (ej. UTC-05:00)">
                        <button type="button" class="btnQuitar">Quitar</button>
                    </div>   
                <% }); %>
            <% } %>
            
        </div>
        <input type="submit" value="Guardar">
    </form>

    <script src="/js/formFunctions.mjs"></script>
    <script>
        //dar funcionalidad a los botones quitar que aparecen de base
        const botonesQuitar = document.querySelectorAll('.btnQuitar');
        //console.log(botonesQuitar);
        botonesQuitar.forEach(btnQuitar => {
            btnQuitar.addEventListener('click', ()=>{
                //console.log("BTN quitar: ", btnQuitar);
                const padre = btnQuitar.parentElement;
                //console.log(padre);
                padre.remove();
            });
        });
    </script>
</body>